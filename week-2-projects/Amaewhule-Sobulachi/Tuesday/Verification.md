
# Smart Contract Verification via Hardhat on Metis Blockchain

## What is Smart Contract Verification

Verifying a contract means making its source code public, along with the compiler settings you used, which allows anyone to compile it and compare the generated bytecode with the one that is deployed on-chain. Doing this is extremely important in an open platform like Ethereum.
It can also be said to be the process of verifying that the smart contract bytecode uploaded to the network matches the expected smart contract source files.

---

## Why Smart Contract Verification

- Transparency:
One of the most important aspects of Web3 is decentralization and transparency. When you open-source your project's smart contracts, it increases trust in the community and allows anyone to inspect the code and suggest improvements.

- Security:
Once your smart contract is verified, it will effectively have more eyes on it, and smart contract experts can discover any potential vulnerabilities. The downside is that someone (a black hat) may find the vulnerability first, which can lead to your contract being exploited.

---

## Ways to Verify a Smart Contract

Smart Contracts are verified using automated tools . There are various tools of verifying a smart contract some of which are:

- Etherscan
- Sourcify
- Hardhat
- Remix IDE/Etherscan plug-in
- Brownie
- Foundry

## Verification via Hardhat

Hardhat is a smart contract development framework, and can also be used to verify your source code but you'll need an Etherscan API Key to verify your source code.

1. Create a Hardhat boilerplate project:
    _npx hardhat init_

2. Getting an API key from Etherscan:

To get an API Key, go to the Etherscan website, sign in (or create an account) and open the "API Keys" tab. Click the "Add" button and give a name (like "Hardhat") to the API key you are creating. After that you'll see the newly created key in the list.

3. Store the API key as the configuration variable "ETHERSCAN_API_KEY:" in your .env file

4. Open your Hardhat config and set the Etherscan API key as the stored configuration variable "ETHERSCAN_API_KEY:

const { vars } = require("hardhat/config");

const ETHERSCAN_API_KEY = vars.get("ETHERSCAN_API_KEY");

module.exports = {
  // ...rest of the config...
  etherscan: {
    apiKey: ETHERSCAN_API_KEY,
  },
};

5. To deploy and verify the contract,you need to add Infura network in your Hardhat config  to connect to the Sepolia network, but you can use an alternative JSON-RPC URL like Alchemy if you want.

// Go to https://infura.io, sign up, create a new API key
// in its dashboard, and store it as the "INFURA_API_KEY"
// configuration variable
const INFURA_API_KEY = vars.get("INFURA_API_KEY");

// Replace this private key with your Sepolia account private key
// To export your private key from Coinbase Wallet, go to
// Settings > Developer Settings > Show private key
// To export your private key from Metamask, open Metamask and
// go to Account Details > Export Private Key
// Store the private key as the "SEPOLIA_PRIVATE_KEY" configuration
// variable.
// Beware: NEVER put real Ether into testing accounts
const SEPOLIA_PRIVATE_KEY = vars.get("SEPOLIA_PRIVATE_KEY");

const ETHERSCAN_API_KEY = vars.get("ETHERSCAN_API_KEY");

module.exports = {
  // ...rest of your config...
  networks: {
    sepolia: {
      url: `https://sepolia.infura.io/v3/${INFURA_API_KEY}`,
      accounts: [SEPOLIA_PRIVATE_KEY],
    },
  },
  etherscan: {
    apiKey: {
      sepolia: ETHERSCAN_API_KEY,
    },
  },
};

6. You can deploy and verify your contract via:

npx hardhat ignition deploy ignition/modules/Lock.js --network sepolia --verify

---

# For Better Understanding Visit:

- [Different Ways to Verify Your Smart Contract Code](https://www.quicknode.com/guides/ethereum-development/smart-contracts/different-ways-to-verify-smart-contract-code)

- [Verifying contracts](https://hardhat.org/hardhat-runner/docs/guides/verifying)